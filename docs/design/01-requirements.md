# 상품

## 상품 목록

### 전체 상품 목록 조회 및 검색

**목표**: 구매 가능한 상품 리스트를 조회할 수 있다.

**대상**: 모든 사용자(비로그인/ 로그인)

### **Happy Path**

1. 화면 스크롤을 통해 구매 가능한 상품 목록을 조회할 수 있다.
2. 키워드를 입력하여 해당 키워드가 포함된 상품 목록을 조회할 수 있다.
3. 필터 기능을 통해 단일 조건, 복합 조건을 설정하여 상품 목록을 조회할 수 있다. 
4. 정렬(최신순, 인기순, 가격순) 조건을 선택하여 상품 목록을 조회할 수 있다.

### **Fail Cases**

- 검색 조건이 올바르지 않은 경우 (예: 특수문자만 존재), 오류를 반환한다
- 존재하지 않는 필터 조건을 선택한 경우 오류를 반환한다.
- 필터 조건의 입력값이 올바르지 않은 경우 오류를 반환한다.
- 정의되지 않은 정렬 조건으로 요청한 경우 오류를 반환한다.

### 비기능적 요구사항

- 초기 상품 목록 및 추가 로딩 시, 1초 이내에 결과를 확인할 수 있어야 한다.
- 신규 상품 유형 추가 시 필터 및 검색 기능에 쉽게 확장 적용이 가능해야 한다.
- 오류 상황에서는 명확한 HTTP 상태코드와 에러메세지를 반환해야 한다**.**

| 예외 상황 | HTTP 상태 코드 |
| --- | --- |
| 필터 조건 잘못됨 | 400 Bad Request |
| 검색 키워드가 유효하지 않음 | 400 Bad Request |
| 상품 조회 중 예외 | 500 Internal Server Error |

## 상품 상세 조회

**목표**:  선택한 상품의 정보를 상세 조회할 수 있다.

**대상**: 모든 사용자(비로그인/ 로그인)

### **Happy Path**

1. 상품의 이미지, 기본 정보를 조회할 수 있다.
2. 상품의 품절된 옵션을 확인 할 수 있다.
3. 상품의 원가와 이벤트가를 모두 확인 할 수 있다. 

### **Fail Cases**

1. **상품이 존재하지 않는 경우**, 오류를 반환한다.
2. **상품이 삭제되었거나 비공개 처리된 경우**, 오류를 반환한다.
3. **서버 내부 오류로 인해 상세 정보를 조회하지 못한 경우**, 오류를 반환한다. 

### 비기능적 요구사항

1. 상품 상세 조회는 **1초 이내에 응답**해야 한다.
2. 상품 이미지의 용량은 **5MB 이하로 제한**한다.
3. 상품 상세 조회 요청은 **1회 요청당 최대 1개의 상품 ID만 허용**한다.

---

| 예외 상황 | HTTP 상태코드 |
| --- | --- |
| 존재하지 않거나 잘못된 상품 ID로 조회 요청 시 | 404 Not Found |
| 비공개 또는 삭제된 상품 조회 시 | 404 Not Found |
| 상세 정보 조회 중 예외 | 500 Internal Server Error |

# 브랜드

## 브랜드 조회

**목표**:  사용자는 브랜드 리스트를 인기순으로 조회할 수 있다.

**대상**: 모든 사용자(비로그인/ 로그인)

### **Happy Path**

1. 브랜드 페이지 진입과 동시에 **인기순으로 정렬된 브랜드 목록**이 조회된다.

### **Fail Cases**

1. **브랜드가 존재하지 않는 경우**, 오류를 반환한다.
2. **브랜드가 삭제되었거나 비공개 처리된 경우**, 오류를 반환한다.
3. **서버 내부 오류로 인해 브랜드 목록을 조회하지 못한 경우**, 오류를 반환한다.

### 비기능적 요구사항

- 브랜드 리스트 조회는 **1초 이내**에 응답
- 인기 데이터 집계 기준은 명확하게 정의되어야 하며, **동일 기준을 매 요청마다 일관성 있게 유지**해야 한다.
- 사용자 경험을 위해  **랭킹 집계 중 오류가 발생해도 기본 정렬로 반환**한다.

| 예외 상황 | HTTP 상태 코드 |
| --- | --- |
| 브랜드 조회 중 네트워크/DB 장애 | 500 Internal Server Error |

---

# 좋아요

## 좋아요 등록 및 취소

**목표:** 상품에 좋아요를 등록 및 취소할 수 있다.

**대상**: 로그인한 사용자

### **Happy Path**

1. 상품에 처음으로 좋아요를 누르면, 해당 상품의 좋아요 수가 1 증가한다.
2. 같은 상품에 중복해서 좋아요 요청을 보내도, 이미 좋아요가 등록되어 있다면 **변화 없이 성공 응답**을 반환한다. 
3. 좋아요를 취소하면, 좋아요 수가 1 감소한다.
4. 취소 이후 다시 좋아요 요청을 보내면 다시 좋아요가 등록된다.

### **Fail Cases**

1. 로그인하지 않은 사용자가 좋아요를 요청한 경우, 오류를 반환한다.
2. 존재하지 않는 상품에 좋아요 요청을 보낸 경우, 오류를 반환한다. 
3. 서버 내부 오류 또는 DB 연결 실패 등으로 요청을 처리할 수 없는 경우, 오류를 반환한다. 

### 비기능적 요구사항

1. 중복된 좋아요 등록/취소 요청은 한 번만 처리되어야 한다.
2. 사용자가 동일한 좋아요 요청을 여러 번 보내더라도, 시스템은 상태 변경 없이 항상 동일한 응답( `200 OK` 및 현재 좋아요 상태)을 반환해야 한다.
3. 좋아요 수는 실시간 반영되며, **동시에 여러 요청이 들어와도 정확한 갯수가  유지**되어야 한다.
4. 인증되지 않은 사용자의 좋아요 요청은 차단해야 하며, **토큰 기반 인증**을 요구해야 한다.

| 예외 상황 | HTTP 상태 코드 |
| --- | --- |
| 좋아요 요청 시 비로그인 상태 | 401 Unauthorized |
| 존재하지 않는 상품 ID | 404 Not Found |
| 좋아요 처리 중 서버 오류 | 500 Internal Server Error |
| 잘못된 요청 형식 | 400 Bad Request |

## 좋아요 목록 조회

**목표:**  좋아요한 상품 목록을 조회할 수 있다.

**대상**: 로그인한 사용자

### **Happy Path**

1. **좋아요한 상품 리스트를 최신순으로 조회할 수 있다.**
2. **좋아요한 상품의 전체 개수**를 조회할 수 있다.
3. 좋아요**한 상품이 품절 또는 판매 종료된 경우 해당 상태를 함께 확인**할 수 있다.
4. 좋아요**한 상품 리스트에서 상품 상세정보 요청을 할 수 있다.** 

### **Fail Cases**

1. **비로그인 상태에서 좋아요 목록을 요청한 경우**, 오류를 반환한다. 
2. **목록 중 일부 상품이 삭제되거나 접근 불가능한 경우**, 해당 항목만 제외하고 정상 응답한다.
3. **서버 또는 DB 오류로 인해 좋아요 목록을 조회하지 못한 경우**, 오류를 반환한다. 

### 비기능적 요구사항

- 좋아요 목록 조회는 **1초 이내에 응답**되어야 한다.
- 한 번에 최대 30개의 좋아요 상품을 반환하며, 전체 개수는 별도로 반환한다.
- 품절/판매중지 상품의 상태는 **최신 상태로 동기화**되어야 한다.
- 사용자의 좋아요 목록은 **로그인한 사용자 본인만 조회 가능**해야 한다.

| 예외 상황 | HTTP 상태 코드 |
| --- | --- |
| 비로그인 사용자 | 401 Unauthorized |
| 서버 오류 | 500 Internal Server Error |
| 잘못된 요청 파라미터 | 400 Bad Request |

---

# 주문

## 주문 생성 및 결제 요청

**목표: 상품 상세 페이지에서 선택한 옵션으로 주문을 생성하고 결제를 요청할 수 있다.**

**대상**: 로그인한 사용자

### **Happy Path**

1. 상품 상세 페이지에서 옵션과 수량을 선택한 후 주문을 생성할 수 있다.
2. 주문이 성공적으로 생성되면, 사용자는 **주문 확인 화면**으로 이동하여 **주문한 상품의 정보**를 확인할 수 있다.
3. 주문 확인 화면에서 사용자는 배송지와 결제 수단(카드, 간편결제)을 선택할 수 있다.
4. 결제 정보를 확인한 후, 사용자는 **결제 요청**을 할 수 있다.
5. 사용자는 **주문 완료 화면**에서 결제 성공 주문 상태를 확인할 수 있다.

### **Fail Cases**

1. **비로그인 상태에서 주문을 시도한 경우**, 오류를 반환한다.
2. **주문 생성 중 상품이 존재하지 않거나 삭제된 경우**, 오류를 반환한다. 
3. 주문에 포함된 옵션 중 재고가 부족한 항목이 하나라도 있을 경우, 주문 생성은 실패하며 오류를 반환한다.
4. **주문 ID가 유효하지 않거나 사용자에게 속하지 않은 경우**, 오류를 반환한다. 
5. **주문이 이미 결제 완료 또는 취소된 상태인 경우**, 오류를 반환한다.
6. **결제 승인 요청 중 외부 결제사와의 통신 오류가 발생한 경우**, 오류를 반환한다.

### 비기능적 요구사항

- 주문 내역 접근/수정 권한은 본인에게만 허용한다.
- 주문 처리 중 장애 발생 시, 중복 주문 또는 결제 중복이 발생하지 않아야 한다.
- 주문 생성과 결제는 서로 다른 단계에서 처리되며, 각 단계는 자체적으로 트랜잭션을 보장해야 한다. 결제 실패 시 주문은 자동으로 취소되거나 무효화되어야 한다.

| 예외 상황 | HTTP 상태코드 |
| --- | --- |
| 비로그인 상태에서 주문 요청 | 401 Unauthorized |
| 재고 부족 | 400 Bad Request |
| 존재하지 않는 상품 주문 | 404 Not Found |

## 주문 목록 조회

**목표: 주문에 성공한 주문 내역을 조회할 수 있다.**

대상: 로그인한 사용자

### **Happy Path**

- **최신순으로 정렬된 주문내역을 조회할 수 있다.**

### **Fail Cases**

1. **비로그인 상태에서 주문 목록을 요청한 경우**, 오류를 반환한다.
2. **다른 사용자의 주문 내역에 접근을 시도한 경우**, 오류를 반환한다. 

### 비기능적 요구사항

- 인증된 사용자만 자신의 주문 내역을 조회할 수 있다. 타인의 주문 내역은 조회할 수 없어야 한다.
- **주문이 없는 상태에서 주문 내역을 요청한 경우**, 빈 목록이 반환되며 안내 문구가 노출된다.

| 예외 상황 | HTTP 상태코드 |
| --- | --- |
| 비로그인 상태에서 주문 리스트 요청 | 401 Unauthorized |
| 잘못된 파라미터(페이지, 사이즈, 정렬 등) | 400 Bad Request |
| 사용자의 주문 내역이 없는 경우 | 200 OK(빈 배열 반환) |

---

# 기타/공통

- **오류 응답 포맷**: 공통 오류 코드, 메시지, 필요시 상세 원인까지 반환
- **응답 시간**: 모든 화면은 1초 이내, 결제 화면은 2초 이내 응답
- API 요청/응답은 **JSON 포맷**을 사용
